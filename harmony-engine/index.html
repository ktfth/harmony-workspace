<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- JS -->
    <script src="//unpkg.com/alpinejs" defer></script>

    <title>Harmony</title>
</head>
<body>
    <main class="w-1/2 mx-auto container text-center">
        <header class="pt-6">
            <h1 class="text-2xl">Harmony</h1>
        </header>

        <section class="pt-6">
            <form id="promptForm" x-data="{
                prompter: {
                    text: '',
                    model: '',
                    tags: '',
                },

                binResult: {},

                async submitBin() {
                    const {
                        text,
                        model,
                        tags
                    } = this.prompter;

                    try {
                        const response = await fetch('/bin/', {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MDU4ODgxMzYsInVzZXJuYW1lIjoiaGFybW9ueSJ9.ogZiWTxiaUDCVp3HSdYmccLHEwOVgW-rKt22a633rx0',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                text,
                                model,
                                tags,
                            })
                        });

                        const data = await response.json();

                        if (data.id) {
                            alert('Your prompt has been submitted!');
                        } else {
                            alert('Prompt exists!');
                        }
                    } catch (error) {
                        alert('Something went wrong on the backstage!');
                        console.error(error);
                    }
                }
            }" class="p-3 rounded-lg border border-solid zinc-300">
                <div class="mb-4">
                    <label for="prompt" class="block text-gray-700 text-sm font-bold mb-2">Enter your prompt:</label>
                    <textarea id="prompt" name="prompt" x-model="prompter.text" class="shadow appearance-none border rounded w-full mb-3 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" rows="4" placeholder="Put your prompt here!"></textarea>
                    <input type="text" name="model" x-model="prompter.model" class="shadow appearance-none border rounded w-full mb-3 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Model" />
                    <input type="text" name="tags" x-model="prompter.tags" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Tags" />
                </div>
                <button type="button" @click="submitBin()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                    Submit
                </button>
            </form>
        </section>
    </main>
</body>
</html>
